<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::Layout(~{::section})}" th:inline="javascript">
<head>
  <meta charset="UTF-8">
  <title>Edit School</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<section>
    <div class="container">
        <div class="mt-2 gy-5 mb-5">
            <div class="card-header fs-3">Users Role List</div>
            <hr/>
            <table class="table table-bordered table-striped table-hover table-sm" th:if="${hasUserRoleMapping}">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Username</th>
                        <th>Name</th>
                        <th>Mobile</th>
                        <th>Role</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody class="table-group-divider">
                    <tr th:each="emp : ${employees}">
                        <td th:text="${emp.userEntity.username}"></td>
                        <td th:text="${emp.employeeName}"></td>
                        <td th:text="${emp.mobile1}"></td>
                        <td th:text="${emp.userEntity.roles}"></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            <div th:if="${!hasUserRoleMapping}">
                <p class="text-center">No User-Role found.</p>
            </div>
            <div class="pt-5">
                <a class="btn btn-success" href="/admin/add-user-to-role"><i class="bi bi-node-plus-fill"></i> Assign Role to User</a>
            </div>
        </div>
    </div>
    <script src="/js/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/js/toastr.min.js"></script>
    <script type="text/javascript" th:inline="javascript">
        const successMessage = [[${success}]];
        if (successMessage) {
            showMsg("success", successMessage, "Success");
        }

        const infoMessage = [[${info}]];
        if (infoMessage) {
            showMsg("info", infoMessage, "Info");
        }

        const errorMessage = [[${error}]];
        if (errorMessage) {
            showMsg("error", errorMessage, "Error");
        }

        function showMsg(msgType, msg, headerValue){
            toastr.options = {
              "closeButton": true,
              "debug": false,
              "newestOnTop": false,
              "progressBar": false,
              "positionClass": "toast-top-right",
              "preventDuplicates": false,
              "onclick": null,
              "showDuration": "600",
              "hideDuration": "1000",
              "timeOut": "5000",
              "extendedTimeOut": "1000",
              "showEasing": "swing",
              "hideEasing": "linear",
              "showMethod": "fadeIn",
              "hideMethod": "fadeOut"
            }
            toastr[msgType](msg,headerValue);
        }
    </script>
</section>
</body>
</html>